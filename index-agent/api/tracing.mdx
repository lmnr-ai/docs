---
title: Tracing and Session Replay
description: Set up tracing and session replay for browser agent sessions using the Index API
---

# Tracing and Session Replay

One of the most powerful features of using Index through the Laminar platform is the comprehensive tracing and observability it provides. When you run browser agent tasks through the API, you get:

1. **Full Browser Session Replay**: Watch exactly what the browser agent saw and did during execution
2. **Synchronized Traces**: See the agent's internal reasoning process alongside browser actions
3. **Performance Metrics**: Track duration, token usage, and other performance indicators
4. **Error Analysis**: Easily identify and debug failures or unexpected behaviors

## Setting Up Tracing

To ensure your browser agent sessions are properly traced when using the Index API, make sure you've initialized Laminar at the start of your application:

<Tabs>
    <Tab title="TypeScript">
    ```typescript
    import { Laminar as L } from '@lmnr-ai/lmnr';
    
    // Initialize Laminar with your project API key
    L.initialize({ projectApiKey: "YOUR_PROJECT_API_KEY" });
    ```
    </Tab>
     <Tab title="Python">
    ```python
    from lmnr import Laminar
    
    # Initialize tracing with your project API key
    Laminar.initialize(project_api_key="YOUR_PROJECT_API_KEY")
    ```
    </Tab>
</Tabs>

All browser agent activities will automatically be traced and recorded in the Laminar platform, where you can access the session replays and analysis.

## Viewing Session Replays

Once you run an agent through the Index API, you can access the session recording in the **Traces** tab of the Laminar platform.

The session replay interface provides:

- A timeline showing the agent's activity
- The browser viewport showing exactly what the agent saw
- The agent's internal reasoning and decision-making process
- A list of actions taken by the agent
- Extracted data and final results

## Trace Context and Correlation

When running multiple related browser sessions, you can correlate them by passing the same trace context:

<Tabs>
    <Tab title="TypeScript">
    ```typescript
    import { LaminarClient, context } from '@lmnr-ai/lmnr';
    
    const client = new LaminarClient({
      projectApiKey: "YOUR_PROJECT_API_KEY",
    });
    
    // Create a trace context
    const traceContext = context.active();
    
    // Run multiple related agent sessions with the same context
    async function runRelatedAgentTasks() {
      // First task
      const response1 = await client.agent.run({
        prompt: "Search for the latest AI research papers",
        context: traceContext
      });
      
      // Second related task with the same context
      const response2 = await client.agent.run({
        prompt: "Summarize the top 3 papers you found",
        context: traceContext
      });
    }
    ```
    </Tab>
     <Tab title="Python">
    ```python
    from lmnr import LaminarClient, context
    
    client = LaminarClient(project_api_key="YOUR_PROJECT_API_KEY")
    
    # Create a trace context
    trace_context = context.active()
    
    # First task
    response1 = client.agent.run(
        prompt="Search for the latest AI research papers",
        context=trace_context
    )
    
    # Second related task with the same context
    response2 = client.agent.run(
        prompt="Summarize the top 3 papers you found",
        context=trace_context
    )
    ```
    </Tab>
</Tabs>

## Adding Metadata to Traces

You can add custom metadata to your browser agent sessions to make them more searchable and provide additional context:

<Tabs>
    <Tab title="TypeScript">
    ```typescript
    import { LaminarClient, context } from '@lmnr-ai/lmnr';
    
    const client = new LaminarClient({
      projectApiKey: "YOUR_PROJECT_API_KEY",
    });
    
    // Add metadata to the current trace
    context.current().addMetadata({
      userId: "user-123",
      taskType: "research",
      priority: "high"
    });
    
    // Run agent with enriched context
    const response = await client.agent.run({
      prompt: "Research the latest AI developments in healthcare"
    });
    ```
    </Tab>
     <Tab title="Python">
    ```python
    from lmnr import LaminarClient, context
    
    client = LaminarClient(project_api_key="YOUR_PROJECT_API_KEY")
    
    # Add metadata to the current trace
    context.current().add_metadata({
      "user_id": "user-123",
      "task_type": "research",
      "priority": "high"
    })
    
    # Run agent with enriched context
    response = client.agent.run(
        prompt="Research the latest AI developments in healthcare"
    )
    ```
    </Tab>
</Tabs>

## Debugging Failed Sessions

When a browser agent session fails or produces unexpected results, the trace and session replay become invaluable debugging tools:

1. Navigate to the Traces tab in the Laminar platform
2. Find the failed session (you can filter by status or search by metadata)
3. Open the trace to view the session replay
4. Examine the agent's reasoning and decision points
5. Look for error messages or unexpected behaviors in the browser view
6. Check the final state and any error details

The visual replay gives you unprecedented insight into how the browser agent interprets and executes your instructions, making it easier to refine your prompts and build robust web automation workflows.


