---
title: Trace Anthropic in JS and Python (3 steps)
sidebarTitle: Anthropic
description: See Anthropic calls with prompts, responses, tokens, and cost without code changes.
---

Instrument Anthropic with a single import. Every message call shows up in Laminar with inputs/outputs, latency, tokens, and cost.

<Frame>
  <img src="/images/traces/claude-agent-sdk.png" alt="Anthropic span with tokens and cost" />
</Frame>

## What you'll build

- Traces for each `messages.create` call with prompts/responses.  
- Token + cost tracking per call and rolled up.  
- Playground links to iterate on prompts.

## Copy/paste/run

<Tabs items={['TypeScript', 'Python']}>
  <Tab title="TypeScript">

```bash
npm install @lmnr-ai/lmnr @anthropic-ai/sdk
```

Add one-line auto-instrumentation:

```ts
import 'lmnr/auto';
import Anthropic from '@anthropic-ai/sdk';

const anthropic = new Anthropic({ apiKey: process.env.ANTHROPIC_API_KEY });

const res = await anthropic.messages.create({
  model: 'claude-3-7-sonnet',
  max_tokens: 128,
  messages: [{ role: 'user', content: 'Hello from Laminar' }],
});

console.log(res.content);
```

Run it:

```bash
LMNR_PROJECT_API_KEY=your_key node app.js
```

<Note>
Prefer manual init? Use `Laminar.initialize({ instrumentModules: { anthropic: Anthropic } });`.
</Note>

  </Tab>
  <Tab title="Python">

```bash
pip install "lmnr[anthropic]" anthropic
```

Add one-line auto-instrumentation:

```python
import lmnr.auto
from anthropic import Anthropic
import os

client = Anthropic(api_key=os.environ["ANTHROPIC_API_KEY"])

resp = client.messages.create(
    model="claude-3-7-sonnet",
    max_tokens=128,
    messages=[{"role": "user", "content": "Hello from Laminar"}],
)

print(resp.content)
```

Run it:

```bash
LMNR_PROJECT_API_KEY=your_key python app.py
```

  </Tab>
</Tabs>

## What to look for in the trace

- Span name: `anthropic.messages.create` under your parent span if you wrap functions with `observe`.  
- Inputs/outputs: full prompt and response.  
- Tokens/cost: per-call totals and rollups.  
- Playground button: open the span to tweak prompts and rerun.

## What just happened?

- `import 'lmnr/auto'` instruments the Anthropic SDK before client creation.
- Each call emits a span with prompt, response, tokens, and cost to your Laminar project.
- Traces link to Playgrounds so you can refine prompts directly from spans.

## Build this next

- Next.js + Anthropic → [Next.js integration](/tracing/integrations/nextjs)  
- Compare Anthropic vs OpenAI in one app → [OpenAI integration](/tracing/integrations/openai)  
- Add tags to track cost by feature/team → [Tags and metadata](/tracing/structure/tags)
