---
title: Observability for Claude Agent SDK
sidebarTitle: Claude Agent SDK
---

## Overview

Claude Agent SDK is a framework for calling Claude Code from your own code.
It abstracts away the underlying process management and calls to the model API.

## What Laminar captures

- The entire structure of the Claude Agent SDK function calls, including `connect`, `query`, and `receive_messages`.
- LLM prompts and responses sent to the model.
- Tool calls and their results.
- Latencies, token counts, and token costs.

## Python

<Steps>
<Step title="Installation">

Claude Agent SDK integration is packaged as a separate extra.

```bash
pip install 'lmnr[claude-agent-sdk]'
```

</Step>
<Step title="Set up your environment variables">

Store your API keys in a `.env` file or export them as environment variables.

```bash
export LMNR_PROJECT_API_KEY=your-laminar-project-api-key
export ANTHROPIC_API_KEY=your-anthropic-api-key
```

</Step>
<Step title="Initialize Laminar">

Initialize Laminar at the start of your application or file.

```python {4-6}
import asyncio

from claude_agent_sdk import ClaudeSDKClient
from lmnr import Laminar, observe

Laminar.initialize()

@observe()
async def main():
    async with ClaudeSDKClient() as client:
        await client.query(
            "Explain to me with examples, how memoization speeds up recursive "
            "function calls. Use the Fibonacci sequence as an example."
        )
        async for msg in client.receive_response():
            print(msg)

if __name__ == "__main__":
    asyncio.run(main())
```

</Step>
</Steps>

## TypeScript / JavaScript

<Steps>
<Step title="Installation">

Ensure you are using `@lmnr-ai/lmnr` version `0.7.10` or higher.

```bash
npm install @lmnr-ai/lmnr @anthropic-ai/claude-agent-sdk
# or
pnpm add @lmnr-ai/lmnr @anthropic-ai/claude-agent-sdk
```

</Step>
<Step title="Set up your environment variables">

Store your API keys in a `.env` file or export them as environment variables.

```bash
export LMNR_PROJECT_API_KEY=your-laminar-project-api-key
```

</Step>
<Step title="Usage">

In the JS SDK, you simply wrap the query function.

```typescript
import { query as origQuery } from "@anthropic-ai/claude-agent-sdk";
import { Laminar } from "@lmnr-ai/lmnr";
// 1. Initialize Laminar
Laminar.initialize({
  projectApiKey: process.env.LMNR_PROJECT_API_KEY
});
// 2. Wrap the original query function
const query = Laminar.wrapClaudeAgentQuery(origQuery);
async function run() {
  // 3. Use the wrapped query function
  const result = await query({
    prompt: "Scan the current directory for TODOs and create a summary markdown file."
  });

  console.log(result);
}
run();
```

</Step>
</Steps>

## View the traces in Laminar

Go to the Laminar dashboard, and you will see the traces for the Claude Agent SDK.

Example trace:

<img src="/images/traces/claude-agent-sdk.png" alt="Claude Agent SDK Trace" />
