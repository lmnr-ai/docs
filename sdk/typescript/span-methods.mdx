---
title: Span Methods
description: Set attributes, outputs, tags, and events on Laminar spans in TypeScript.
---

# Span Methods

## Laminar.setSpanAttributes(attributes)

Set attributes on the current span.

```typescript
await observe({ name: 'process' }, async () => {
  Laminar.setSpanAttributes({
    'document.pages': 10,
    'document.language': 'en',
  });
});
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `attributes` | `Record<string, AttributeValue>` | Key-value pairs |

---

## Laminar.setSpanOutput(output)

Explicitly set span output.

```typescript
await observe({ name: 'complex_operation' }, async () => {
  const result = await doWork();
  Laminar.setSpanOutput(result.summary); // Record only the summary
  return result;
});
```

**Note:** No-op if `output` is `null` or `undefined`.

---

## Laminar.setSpanTags(tags) / Laminar.addSpanTags(tags)

Add tags to the current span.

```typescript
await observe({ name: 'process' }, async () => {
  if (input.length > 10000) {
    Laminar.setSpanTags(['long-input']);
  }
});
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `tags` | `string[]` | Tags to add (deduplicated) |

---

## Laminar.event(options)

Add an event to the current span, or create a span if none exists.

```typescript
await observe({ name: 'workflow' }, async () => {
  Laminar.event({
    name: 'checkpoint_reached',
    attributes: { step: 5 },
  });
});
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `name` | `string` | Event name (required) |
| `attributes` | `Record<string, any>` | Event attributes |
| `timestamp` | `TimeInput` | Custom timestamp |
| `sessionId` | `string` | Session ID |
| `userId` | `string` | User ID |

---

## span.end()

End a manually created span.

```typescript
const span = Laminar.startSpan({ name: 'operation' });
try {
  await doWork();
} finally {
  span.end(); // Always end in finally block
}
```

**Note:** Pops active context if span was activated via `startActiveSpan`.

---

## span.recordException(error, time?)

Record an exception on the span.

```typescript
const span = Laminar.startSpan({ name: 'risky_operation' });
try {
  await riskyWork();
} catch (error) {
  span.recordException(error);
  throw error;
} finally {
  span.end();
}
```

---

## span.setAttributes(attributes)

Set attributes directly on a span object.

```typescript
const span = Laminar.startSpan({ name: 'operation' });
span.setAttributes({ 'operation.status': 'success' });
span.end();
```
