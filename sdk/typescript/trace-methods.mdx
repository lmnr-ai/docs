---
title: Trace Methods
description: Manage trace-level metadata and IDs within Laminar spans.
---

# Trace Methods

These must be called inside a span context (within `observe` or manual span).

## Laminar.setTraceSessionId(sessionId)

Group this trace with others in a session.

```typescript
await observe({ name: 'handle_message' }, async () => {
  Laminar.setTraceSessionId('conversation-abc-123');
});
```

---

## Laminar.setTraceUserId(userId)

Associate trace with a user.

```typescript
await observe({ name: 'handle_request' }, async () => {
  Laminar.setTraceUserId('user-456');
});
```

---

## Laminar.setTraceMetadata(metadata)

Add key-value metadata to the trace.

```typescript
await observe({ name: 'handle_request' }, async () => {
  Laminar.setTraceMetadata({
    environment: 'production',
    region: 'us-west',
    feature_flag: 'new-model-v2',
  });
});
```

**Note:** Non-primitive values are JSON-stringified. Stored under `lmnr.association.properties.metadata.*`.

---

## Laminar.getTraceId()

Get the current trace ID.

```typescript
await observe({ name: 'operation' }, async () => {
  const traceId = Laminar.getTraceId();
  console.log('Trace:', traceId);
  return { traceId, result };
});
```

**Returns:** `string | null` â€” UUID string or `null` if no active span.
