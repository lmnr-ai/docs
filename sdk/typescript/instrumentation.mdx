---
title: TypeScript Instrumentation
description: Configure auto-instrumentation and manual patching in the TypeScript SDK.
---

## instrumentModules

Pass modules to auto-instrument in `initialize()`.

```typescript
import { Laminar } from '@lmnr-ai/lmnr';
import OpenAI from 'openai';
import Anthropic from '@anthropic-ai/sdk';

Laminar.initialize({
  projectApiKey: process.env.LMNR_PROJECT_API_KEY,
  instrumentModules: {
    openAI: OpenAI,
    anthropic: Anthropic,
  },
});
```

**Supported module keys:**

| Key | Package |
|-----|---------|
| `openAI` / `OpenAI` | `openai` |
| `anthropic` | `@anthropic-ai/sdk` |
| `azureOpenAI` | Azure OpenAI |
| `cohere` | `cohere-ai` |
| `bedrock` | AWS Bedrock |
| `google_vertexai` | Vertex AI |
| `google_aiplatform` | AI Platform |
| `pinecone` | `@pinecone-database/pinecone` |
| `langchain` | `langchain` (with submodules) |
| `llamaIndex` | `llamaindex` |
| `chromadb` | `chromadb` |
| `qdrant` | `@qdrant/js-client-rest` |
| `together` | `together-ai` |
| `playwright` | `playwright` |
| `puppeteer` | `puppeteer` |
| `stagehand` | `@browserbasehq/stagehand` |
| `kernel` | Microsoft Kernel |
| `claudeAgentSDK` | `@anthropic-ai/claude-agent-sdk` |

**Special cases:**
- Pass `undefined` → auto-instrument all supported
- Pass `{}` → disable all auto-instrumentation

---

## Laminar.patch(modules)

Manually instrument modules after initialization.

```typescript
import { Laminar } from '@lmnr-ai/lmnr';
import OpenAI from 'openai';

Laminar.initialize({ projectApiKey: '...' });

// Later (e.g., in Next.js server components)
Laminar.patch({ openAI: OpenAI });
```

**Note:** Throws if `modules` empty. Warns if Laminar not initialized.

---

## wrapClaudeAgentQuery(originalQuery)

Instrument Claude Agent SDK query function.

```typescript
import { wrapClaudeAgentQuery } from '@lmnr-ai/lmnr';
import { query } from '@anthropic-ai/claude-agent-sdk';

const instrumentedQuery = wrapClaudeAgentQuery(query);
```

**Use when:** Claude Agent SDK imported before `Laminar.initialize()` or in ESM environments.
