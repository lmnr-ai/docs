---
title: SDK Initialization
description: Initialize Laminar tracing, manage lifecycle, and configure tracing level.
---

# SDK Initialization

Initialize Laminar tracing, manage lifecycle, and configure tracing level.

## Initialization

## Laminar.initialize(options?)

Initialize Laminar tracing. Call once at application startup.

```typescript
import { Laminar } from '@lmnr-ai/lmnr';
import OpenAI from 'openai';

Laminar.initialize({
  projectApiKey: process.env.LMNR_PROJECT_API_KEY,
  instrumentModules: { openAI: OpenAI },
});
```

**Parameters:**

| Name | Type | Default | Description |
|------|------|---------|-------------|
| `projectApiKey` | `string` | `LMNR_PROJECT_API_KEY` env | Project API key |
| `baseUrl` | `string` | `https://api.lmnr.ai` | API base URL |
| `baseHttpUrl` | `string` | `baseUrl` | HTTP endpoint override |
| `httpPort` | `number` | Port from URL or `443` | HTTP port |
| `grpcPort` | `number` | `8443` | gRPC port |
| `instrumentModules` | `Record<string, any>` | All supported | Modules to auto-instrument |
| `disableBatch` | `boolean` | `false` | Send spans immediately |
| `traceExportTimeoutMillis` | `number` | `30000` | Export timeout in ms |
| `maxExportBatchSize` | `number` | OTel default | Max spans per batch |
| `logLevel` | `'debug' \| 'info' \| 'warn' \| 'error'` | `'error'` | OpenTelemetry log level |
| `forceHttp` | `boolean` | `false` | Use OTLP/HTTP instead of gRPC |
| `sessionRecordingOptions` | `SessionRecordingOptions` | — | Browser session recording config |

**Environment variables:**
- `LMNR_PROJECT_API_KEY` — Fallback for `projectApiKey`
- `LMNR_BASE_URL` — Fallback for `baseUrl`
- `LMNR_SPAN_CONTEXT` — Restore parent context from upstream
- `OTEL_EXPORTER_OTLP_TRACES_ENDPOINT` — OTEL endpoint override

**Notes:**
- Loads `.env` via dotenv automatically
- Warns on double initialization
- Requires API key or OTEL exporter env vars

### Laminar.initialized()

Check whether Laminar has already been initialized.

**Returns:** `boolean`

---

## Lifecycle

### Laminar.flush()

Force exporters to flush buffered spans. Use in serverless functions or CLI scripts before the process exits.

**Returns:** `Promise<void>`

```typescript
await Laminar.flush();
```

### Laminar.shutdown()

Flush all pending spans, reset configuration and context, and stop the Claude proxy. Call during graceful shutdown.

**Returns:** `Promise<void>`

```typescript
await Laminar.shutdown();
```

### Laminar.getHttpUrl()

Return the configured HTTP URL.

**Returns:** `string`

### Laminar.getProjectApiKey()

Return the configured project API key.

**Returns:** `string | undefined`

---

## Tracing Level

### Laminar.withTracingLevel(level, fn)

Run a function with a tracing level override. Useful for temporarily disabling tracing or capturing metadata only.

```typescript
import { Laminar, TracingLevel } from '@lmnr-ai/lmnr';

const result = Laminar.withTracingLevel(TracingLevel.META_ONLY, () => {
  // Inputs and outputs not recorded
  return handleSensitiveData(userData);
});
```

**Parameters:**

| Name | Type | Description |
|------|------|-------------|
| `level` | `TracingLevel` | `OFF`, `META_ONLY`, or `ALL` |
| `fn` | `() => T` | Function to execute under the override |

**Returns:** Result of `fn`

### TracingLevel

Enum controlling what data is captured:

| Value | Description |
|-------|-------------|
| `ALL` | Everything—inputs, outputs, attributes (default) |
| `META_ONLY` | Structure and timing, but no inputs or outputs |
| `OFF` | Disable tracing entirely |
